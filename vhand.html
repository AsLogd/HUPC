<!doctype html>
<html>
  <head>
    <title>VirtualHand</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/third-party/threejs/three.js"></script>

  </head>
  <body>
    <script>
      var socket = io();
      window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);
      document.addEventListener('touchstart', handleTouchEventStart, false);
      document.addEventListener('touchend', handleTouchEventEnd, true);
      var force;
      function handleTouchEventStart(evt){
        socket.emit("pick");
      }
      function handleTouchEventEnd(evt){
        socket.emit("drop");
      }
      var rotation = {alpha:"", beta:"", gamma:""};
       function onDeviceOrientationChangeEvent(evt){
        
        rotation.alpha = evt.gamma ? evt.alpha : 0; // Z
        rotation.beta = evt.beta ? evt.beta : 0; // X'
        rotation.gamma = evt.gamma ? evt.gamma : 0; // Y''

        
      }
      setInterval(function(){
        socket.emit('rotation', rotation);
      },100);


    </script>
  </body>
</html>